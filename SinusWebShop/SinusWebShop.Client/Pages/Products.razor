@* @page "/products/{category}"
 *@@using Newtonsoft.Json
@using SinusWebShop.Client.Models
@using SinusWebShop.Client.Services
@inject HttpClient HttpClient
@inject NavigationManager NavigationManager
@inject ProductService ProductService

<h3>Produkter i @Category</h3>

<div class="product-grid">
    @foreach (var product in ProductList)
    {
        <div class="product-item">
            <img src="@product.Thumbnail" alt="@product.Title" />
            <h4>@product.Title</h4>
            <p>@product.Description</p>
            <p>Pris: @product.Price kr</p>
            <button @onclick="() => NavigateToProductDetails(product.Id ?? 0)">Visa detaljer</button> <!-- Här hanteras nullvärdet -->
        </div>
    }
</div>

@code {
    [Parameter]
    public string Category { get; set; }

    private List<Product> ProductList = new List<Product>();

    protected override async Task OnInitializedAsync()
    {
        ProductList = await ProductService.GetProductsAsync(Category);
    }

    void NavigateToProductDetails(int productId)
    {
        NavigationManager.NavigateTo($"/product/{productId}");
    }
}

<style>
    .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
    }

    .product-item {
        background-color: #f0f0f0;
        padding: 20px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

        .product-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .product-item h4 {
            margin-bottom: 10px;
            color: #333;
        }

        .product-item p {
            font-size: 14px;
            color: #666;
        }
</style>
