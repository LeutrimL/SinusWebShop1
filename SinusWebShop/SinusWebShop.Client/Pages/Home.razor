@page "/"
@using Microsoft.AspNetCore.Components.Web
@using SinusWebShop.Client.Models
@inject HttpClient HttpClient
@inject NavigationManager NavigationManager
@rendermode InteractiveServer

<h3>Huvudkategorier</h3>
<div class="category-grid">
    @foreach (var category in Categories)
    {
        <div class="category-item">
            <h4>@category</h4>
            <p>Utforska vårt sortiment av @category.ToLower()</p>
            <button @onclick="() => NavigateToProducts(category)">Utforska</button>
        </div>
    }
</div>

@code {
    private List<string> Categories = new List<string>();

    protected override async Task OnInitializedAsync()
    {
        await LoadCategories();
    }

    private async Task LoadCategories()
    {
        try
        {
            var response = await HttpClient.GetAsync("https://dummyjson.com/products/categories");
            if (response.IsSuccessStatusCode)
            {
                Categories = await response.Content.ReadFromJsonAsync<List<string>>();
            }
            else
            {
                // Hantera fel här
                Console.WriteLine("Ett fel uppstod vid hämtning av kategorier.");
            }
        }
        catch (Exception ex)
        {
            // Hantera fel här
            Console.WriteLine($"Ett fel uppstod: {ex.Message}");
        }
    }

    private void NavigateToProducts(string category)
    {
        NavigationManager.NavigateTo($"/products/{category.ToLower()}");
    }
}

<style>
    .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
    }

    .category-item {
        background-color: #f0f0f0;
        padding: 20px;
        border-radius: 10px;
        transition: all 0.3s ease;
        text-align: center;
    }

        .category-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .category-item h4 {
            margin-bottom: 10px;
            color: #333;
        }

        .category-item p {
            font-size: 14px;
            color: #666;
        }

        .category-item button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

            .category-item button:hover {
                background-color: #0056b3;
            }
</style>
